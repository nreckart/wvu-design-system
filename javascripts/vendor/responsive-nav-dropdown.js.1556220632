/*! responsive-nav.js 1.0.39
  * https://github.com/viljamis/responsive-nav.js
  * http://responsive-nav.com
  *
  * Copyright (c) 2015 @viljamis
  * Available under the MIT license
  */
!function(E,x,N){"use strict";var e=function(e,t){!!x.getComputedStyle||(x.getComputedStyle=function(n){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return"float"===e&&(e="styleFloat"),t.test(e)&&(e=e.replace(t,function(e,t,n){return n.toUpperCase()})),n.currentStyle[e]?n.currentStyle[e]:null},this});var i,s,o,n,a,r,l,c=function(e,t,n,o){if("addEventListener"in e)try{e.addEventListener(t,n,o)}catch(i){if("object"!=typeof n||!n.handleEvent)throw i;e.addEventListener(t,function(e){n.handleEvent.call(n,e)},o)}else"attachEvent"in e&&("object"==typeof n&&n.handleEvent?e.attachEvent("on"+t,function(){n.handleEvent.call(n)}):e.attachEvent("on"+t,n))},u=function(e,t,n,o){if("removeEventListener"in e)try{e.removeEventListener(t,n,o)}catch(i){if("object"!=typeof n||!n.handleEvent)throw i;e.removeEventListener(t,function(e){n.handleEvent.call(n,e)},o)}else"detachEvent"in e&&("object"==typeof n&&n.handleEvent?e.detachEvent("on"+t,function(){n.handleEvent.call(n)}):e.detachEvent("on"+t,n))},d=function(e){if(e.children.length<1)throw new Error("The Nav container has no containing elements");for(var t=[],n=0;n<e.children.length;n++)1===e.children[n].nodeType&&t.push(e.children[n]);return t},h=function(e,t){for(var n in t)e.setAttribute(n,t[n])},p=function(e,t){0!==e.className.indexOf(t)&&(e.className+=" "+t,e.className=e.className.replace(/(^\s*)|(\s*$)/g,""))},f=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/(^\s*)|(\s*$)/g,"")},v=function(e,t,n){for(var o=0;o<e.length;o++)t.call(n,o,e[o])},g=function(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},m=function(){for(var e=this,t=s.menuItems;-1===e.className.indexOf(t);)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement},y=E.createElement("style"),b=E.documentElement,w=function(e,t){var n;for(n in this.options={animate:!0,transition:284,label:"Menu",insert:"before",customToggle:"",closeOnNavClick:!1,openPos:"relative",navClass:"nav-collapse",navActiveClass:"js-nav-active",jsClass:"js",enableFocus:!1,enableDropdown:!1,menuItems:"menu-items",subMenu:"sub-menu",openDropdown:"Open sub menu",closeDropdown:"Close sub menu",init:function(){},open:function(){},close:function(){},resizeMobile:function(){},resizeDesktop:function(){}},t)this.options[n]=t[n];if(p(b,this.options.jsClass),this.wrapperEl=e.replace("#",""),E.getElementById(this.wrapperEl))this.wrapper=E.getElementById(this.wrapperEl);else{if(!E.querySelector(this.wrapperEl))throw new Error("The nav element you are trying to select doesn't exist");this.wrapper=E.querySelector(this.wrapperEl)}this.wrapper.inner=d(this.wrapper),s=this.options,i=this.wrapper,this._init(this)};return w.prototype={destroy:function(){if(this._removeStyles(),f(i,"closed"),f(i,"opened"),f(i,s.navClass),f(i,s.navClass+"-"+this.index),f(b,s.navActiveClass),i.removeAttribute("style"),i.removeAttribute("aria-hidden"),u(x,"resize",this,!1),u(x,"focus",this,!1),u(E.body,"touchmove",this,!1),u(o,"touchstart",this,!1),u(o,"touchend",this,!1),u(o,"mouseup",this,!1),u(o,"keyup",this,!1),u(o,"click",this,!1),s.customToggle?o.removeAttribute("aria-hidden"):o.parentNode.removeChild(o),s.enableDropdown){var n=this;v(l,function(e,t){u(t,"touchstart",n,!1),u(t,"touchend",n,!1),u(t,"mouseup",n,!1),u(t,"keyup",n,!1),u(t,"click",n,!1)})}},toggle:function(){!0===n&&(r?this.close():this.open())},open:function(){r||(f(i,"closed"),p(i,"opened"),p(b,s.navActiveClass),p(o,"active"),i.style.position=s.openPos,h(i,{"aria-hidden":"false"}),h(i,{"aria-expanded":"true"}),h(o,{"aria-expanded":"true"}),r=!0,s.open())},close:function(){r&&(p(i,"closed"),f(i,"opened"),f(b,s.navActiveClass),f(o,"active"),h(i,{"aria-hidden":"true"}),h(i,{"aria-expanded":"false"}),h(o,{"aria-expanded":"false"}),s.animate?(n=!1,setTimeout(function(){i.style.position="absolute",n=!0,s.enableDropdown&&(f(i,"dropdown-active"),v(l,function(e,t){f(t,"toggled"),f(t.nextSibling,"toggled")}))},s.transition+10)):(i.style.position="absolute",s.enableDropdown&&(f(i,"dropdown-active"),v(l,function(e,t){f(t,"toggled"),f(t.nextSibling,"toggled")}))),r=!1,s.close())},resize:function(){"none"!==x.getComputedStyle(o,null).getPropertyValue("display")?(a=!0,h(o,{"aria-hidden":"false"}),h(i,{"aria-expanded":"false"}),h(o,{"aria-expanded":"false"}),i.className.match(/(^|\s)closed(\s|$)/)&&(h(i,{"aria-hidden":"true"}),i.style.position="absolute"),i.className.match(/(^|\s)closed(\s|$)/)||(h(i,{"aria-expanded":"true"}),h(o,{"aria-expanded":"true"})),this._createStyles(),this._calcHeight(),s.resizeMobile()):(a=!1,h(o,{"aria-hidden":"true"}),h(i,{"aria-hidden":"false"}),i.removeAttribute("aria-expanded"),o.removeAttribute("aria-expanded"),i.style.position=s.openPos,this._removeStyles(),s.resizeDesktop())},handleEvent:function(e){var t=e||x.event;switch(t.type){case"touchstart":this._onTouchStart(t);break;case"touchmove":this._onTouchMove(t);break;case"touchend":case"mouseup":this._onTouchEnd(t);break;case"click":this._preventDefault(t);break;case"keyup":this._onKeyUp(t);break;case"focus":case"resize":this.resize(t)}},_init:function(){this.index=N++,p(i,s.navClass),p(i,s.navClass+"-"+this.index),p(i,"closed"),r=!(n=!0),this._closeOnNavClick(),this._createToggle(),this._transitions(),this.resize(),this._createFocus(),this._createDropdown();var e=this;setTimeout(function(){e.resize()},20),c(x,"resize",this,!1),c(x,"focus",this,!1),c(E.body,"touchmove",this,!1),c(o,"touchstart",this,!1),c(o,"touchend",this,!1),c(o,"mouseup",this,!1),c(o,"keyup",this,!1),c(o,"click",this,!1),s.init()},_createStyles:function(){y.parentNode||(y.type="text/css",E.getElementsByTagName("head")[0].appendChild(y))},_removeStyles:function(){y.parentNode&&y.parentNode.removeChild(y)},_createToggle:function(){if(s.customToggle){var e=s.customToggle.replace("#","");if(E.getElementById(e))o=E.getElementById(e);else{if(!E.querySelector(e))throw new Error("The custom nav toggle you are trying to select doesn't exist");o=E.querySelector(e)}}else{var t=E.createElement("a");t.innerHTML=s.label,h(t,{href:"#","class":"nav-toggle"}),"after"===s.insert?i.parentNode.insertBefore(t,i.nextSibling):i.parentNode.insertBefore(t,i),o=t}},_closeOnNavClick:function(){if(s.closeOnNavClick){var t=i.getElementsByTagName("a"),n=this;v(t,function(e){c(t[e],"click",function(){a&&n.toggle()},!1)})}},_preventDefault:function(e){if(e.preventDefault)return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),!1;e.returnValue=!1},_onTouchStart:function(e){Event.prototype.stopImmediatePropagation||this._preventDefault(e),this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.touchHasMoved=!1,u(o,"mouseup",this,!1)},_onTouchMove:function(e){(10<Math.abs(e.touches[0].clientX-this.startX)||10<Math.abs(e.touches[0].clientY-this.startY))&&(this.touchHasMoved=!0)},_onTouchEnd:function(e){if(this._preventDefault(e),a){var t=e||x.event,n=t.target||t.srcElement,o=!1;if(g(n,"dropdown-toggle")&&s.enableDropdown&&(o=!0),!this.touchHasMoved){if("touchend"===e.type)return void(o?this._toggleDropdown(n):this.toggle());var i=e||x.event;3!==i.which&&2!==i.button&&(o?this._toggleDropdown(n):this.toggle())}}},_onKeyUp:function(e){var t=e||x.event,n=e.target,o=!1;g(n,"dropdown-toggle")&&s.enableDropdown&&(o=!0),13===t.keyCode&&(o?this._toggleDropdown(n):this.toggle())},_transitions:function(){if(s.animate){var e=i.style,t="max-height "+s.transition+"ms, visibility "+s.transition+"ms linear";e.WebkitTransition=e.MozTransition=e.OTransition=e.transition=t}},_calcHeight:function(){for(var e=0,t=0;t<i.inner.length;t++)e+=i.inner[t].offsetHeight;var n="."+s.jsClass+" ."+s.navClass+"-"+this.index+".opened{max-height:"+e+"px !important} ."+s.jsClass+" ."+s.navClass+"-"+this.index+".opened.dropdown-active {max-height:9999px !important}";y.styleSheet?y.styleSheet.cssText=n:y.innerHTML=n,n=""},_createFocus:function(){if(s.enableFocus){var e,t,n=i.getElementsByTagName("ul")[0].getElementsByTagName("a");for(t=0,e=n.length;t<e;t++)n[t].addEventListener("focus",m,!0),n[t].addEventListener("blur",m,!0)}},_createDropdown:function(){if(s.enableDropdown){var e,t,n=this,o=(i.getElementsByTagName("ul")[0],i.getElementsByClassName(s.subMenu));for(p(i,"multiple-level-nav"),e=0,t=o.length;e<t;e++)o[e].parentNode.setAttribute("aria-haspopup","true"),o[e].insertAdjacentHTML("beforebegin",'<button class="dropdown-toggle" aria-expanded="false">'+s.openDropdown+"</button>");l=i.querySelectorAll(".dropdown-toggle"),v(l,function(e,t){c(t,"touchstart",n,!1),c(t,"touchend",n,!1),c(t,"mouseup",n,!1),c(t,"keyup",n,!1),c(t,"click",n,!1)})}},_toggleDropdown:function(e){e.innerHTML===s.openDropdown?e.innerHTML=s.closeDropdown:e.innerHTML=s.openDropdown;var t=e.parentNode;g(t.parentNode.parentNode,"dropdown");if(g(e,"toggled")){f(e,"toggled"),e.setAttribute("aria-expanded","false");n=e.nextElementSibling;f(n,"toggled"),f(i,"dropdown-active")}else{p(e,"toggled"),e.setAttribute("aria-expanded","true");var n=e.nextElementSibling;p(n,"toggled"),p(i,"dropdown-active")}}},new w(e,t)};"undefined"!=typeof module&&module.exports?module.exports=e:x.responsiveNav=e}(document,window,0);