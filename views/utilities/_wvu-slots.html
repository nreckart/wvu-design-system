<r:comment><!-- Perform the following task 10 times, one for each of the 10 slots in a Super Theme page. --></r:comment>
<r:loop:each times="10">

  <r:comment><!-- Define the prefix... based on the slot number.... This will be used to define unique variable names for each property in each slot. --></r:comment>
  <r:set_var name="slotName">
    slot_<r:item />
  </r:set_var>

  <r:comment><!-- Define the name of the custom data attribute that will be used to store a “Scope” value for this slot. The data in slot_{number}_scope will get pulled into each component to assign a scope for editable regions in the component. --></r:comment>
  <r:set_var name="slotScope" value="{{ CONCAT(slotName, '_scope') }}" />

  <r:set_var name="slotNameValue"><r:page:data name="{$slotName}" /></r:set_var>

  <r:comment><!-- Create a new set of variables that grab the data stored in each of the custom data attribtes we just created for this slot. We can then send the data along to each component when that component is specified in a slot, in order to perform certain functions. --></r:comment>
  <r:set_var name="isEditModeOnly"><r:page:data name="{{ CONCAT(slotName, '_is_edit_mode_only') }}" /></r:set_var>
  <r:set_var name="align"><r:page:data name="{{ CONCAT(slotName, '_align') }}" /></r:set_var>
  <r:set_var name="featurettesStyle"><r:page:data name="{{ CONCAT(slotName, '_featurettes_style') }}" /></r:set_var>
  <r:set_var name="featurettesID"><r:page:data name="{{ CONCAT(slotName, '_featurettes_id') }}" /></r:set_var>
  <r:set_var name="hasSubnav"><r:page:data name="{$slotHasSubnav}" /></r:set_var>
  <r:set_var name="isRandom"><r:page:data name="{{ CONCAT(slotName, '_is_random') }}" /></r:set_var>
  <r:set_var name="limit"><r:page:data name="{{ CONCAT(slotName, '_limit') }}" /></r:set_var>
  <r:set_var name="loopBy"><r:page:data name="{{ CONCAT(slotName, '_loop_by') }}" /></r:set_var>
  <r:set_var name="loopLabelsMatch"><r:page:data name="{{ CONCAT(slotName, '_loop_labels_match') }}" /></r:set_var>
  <r:set_var name="loopOrder"><r:page:data name="{{ CONCAT(slotName, '_loop_order') }}" /></r:set_var>
  <r:set_var name="galleryLoopBy"><r:page:data name="{{ CONCAT(slotName, '_gallery_loop_by') }}" /></r:set_var>
  <r:set_var name="isMain"><r:page:data name="{{ CONCAT(slotName, '_is_main') }}" /></r:set_var>
  <r:set_var name="instanceNumber"><r:page:data name="{{ CONCAT(slotName, '_number') }}" /></r:set_var>
  <r:set_var name="whereToDisplay"><r:page:data name="{{ CONCAT(slotName, '_where_to_display') }}" /></r:set_var>
  <r:set_var name="showHidden"><r:page:data name="{{ CONCAT(slotName, '_show_hidden') }}" /></r:set_var>
  <r:set_var name="slotCustomValue"><r:page:data name="{{ CONCAT(slotName, '_custom') }}" /></r:set_var>

  <r:comment><!-- Show hidden parameter gets a value of 1 or 0, but needs a value of “true” or “false” to be used in an r:each tag in a featurettes component. Convert it here. --></r:comment>
  <r:if_equal x="{$showHidden}" y="1">
    <r:set_var name="showHidden" value="true" />
  </r:if_equal>

  <r:comment><!-- Show hidden parameter gets a value of 1 or 0, but needs a value of “true” or “false” to be used in an r:each tag in a featurettes component. Convert it here. --></r:comment>

  <r:if_true value="{$isRandom}">
    <r:set_var name="isRandom" value="true" />
  </r:if_true>
  <r:if_not_true value="{$isRandom}">
    <r:set_var name="isRandom" value="false" />
  </r:if_not_true>

  <r:if v1="{$slotScope}" v2="1" op="=">
    <r:set_var name="scope" value="site" />
  </r:if>
  <r:if v1="{$slotScope}" v2="1" op="!=">
    <r:set_var name="scope" value="page" />
  </r:if>

  <r:comment><!-- Get display context. If none, set to as_full_width_block. --></r:comment>
  <r:set_var name="displayChecker" value="{$whereToDisplay}" default="as_full_width_block" />

  <r:comment><!-- Get display context of slots component. If none, set to as_full_width_block. --></r:comment>
  <r:set_var name="slotsDisplayContext" value="{$componentDisplayContext}" default="as_full_width_block" />

  <r:comment><!-- If displayChecker and componentDisplayContext match, display the component. displayChecker will be as_full_width_block by default. componentDisplayContext will be set whenever the slots component is called. --></r:comment>
  <r:if_equal v1="{$displayChecker}" v2="{$slotsDisplayContext}">
    <r:if_not_blank value="{$slotNameValue}">

      <r:comment><!-- Check to see if the user wants to use a custom pattern (not in Super Theme). If so, pull partial from local components folder instead. --></r:comment>
      <r:if_blank expr="{$slotCustomValue}">
        <r:set_var name="partialName">components/wvu-<r:page:data name="{$slotName}" />
        <r:partial name="{$partialName}" theme="University Relations: WVU Design System" />
      </r:if_blank>

    </r:if_not_blank>

    <r:if_not_blank expr="{$slotCustomValue}">
      <r:set_var name="partialName">
        components/<r:page:data name="{$slotCustom}" />
      </r:set_var>
      <r:partial name="{$partialName}" />
    </r:if_not_blank>
  </r:if_equal>

</r:loop:each>
